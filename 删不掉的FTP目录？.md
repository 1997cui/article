---
title: 删不掉的FTP目录？
tags:
  - 来自QQ空间
date: 2017-02-04
---

我的[home.ustc.edu.cn](http://home.ustc.edu.cn)这个FTP空间里一直有一个奇怪的文件夹无法删除。这个文件夹的特点是可以随意重命名、进入，里面是空的，但尝试删除时就会失败，即使使用了[FileZilla](https://filezilla-project.org)客户端。

今天和学长讨论起这个问题，忽然决心把它解决掉（如果实在解决不掉就发邮件向网络中心老师请求帮助）。用ftp命令连上去发现`cd 1`能成功进去（证明了文件夹名称里没有乱码字符），`ls`会得到空列表，但`cd ..`再`rmdir 1`会得到550错误。搜索了常见问题后，感觉有可能是文件夹中有隐藏文件还没有删除，而ftp默认是不会列出隐藏文件的（这一点好讨厌）。

解决方法：`ls -a 1`看到隐藏文件，`delete`命令删掉它们，再`rmdir`即可。

p.s. 吐槽一下，Python的`ftplib`这个库真烂，根本没做任何解析！如果有文件名乱码现象，都没法可靠地列出文件列表。（当然了它可能也无能为力，根本问题还是FTP协议设计得不适合应对乱码。）

<!--comment-->

---

HuiqiLiu: 还有一个问题，就是上传上去的含中文的文件，用filezilla一旦上传上去不但不能重命名也不能删除掉。用命令行登录方可删除...我也是醉了

2017-02-07 [回复]()

---

[机智的超立方体](http://0x01.me/) 回复 HuiqiLiu: FileZilla这一点确实比较坑，但解决方案简单，就是统一自己所使用的字符编码。比如我FTP一律使用UTF-8编码，在FileZilla里面设置“强制UTF8”就可以了。

2017-02-08 [回复]()

---

HuiqiLiu 回复 [机智的超立方体](http://0x01.me/): 赞b(￣▽￣)d，话说我一直挺好奇学生500M空间我还剩多少怎么查，是不是只能问网管啊？

2017-02-08 [回复]()

---

[机智的超立方体](http://0x01.me/) 回复 HuiqiLiu: 好像没办法，目前我也只能自己估计。按理说可以发邮件请老师加一个功能，在登录后告诉我已用空间，但估计需要这功能的人不多，还是算了吧。

2017-02-08 [回复]()