---
title: QQ空间说说自动发博客
tags:
  - 来自QQ空间
date: 2017-02-04
---

今天终于实现了期待已久的“QQ空间说说自动发表到博客”。有些人可能注意到了我今天发了一大堆测试说说，测试QQ空间的各种奇怪特性。现在的成果是，只要我发表的说说以这样一段标记开头，就会被腾讯云服务器上的监视程序立刻发表到博客：

`<http://0x01.me：标题>`

这个识别标记是特别选择的，既能包含一个博文标题以供程序发表博客，又不至于晦涩，允许读者一键点击链接，在浏览器中查看（效果会比QQ空间展示的更好一些）。这些说说的内容应该用[Markdown][1]标记语言书写（比如这条说说，或者说这篇文章），以便直接发布成为文章。

这个项目使用了之前写的[Qzone-API][2]项目来每隔半分钟检查一下我的新说说。如果有要更新的内容（无论是发现了新的要发表的博文，还是有之前的内容被修改了），就在[0x01.me][3]项目中生成一个commit并push（它不会为这篇博客设定分类，并且只会设置一个“来自QQ空间”标签）。接下来的工作就是之前[《博客迁移》[4]这篇文章已经说过的了，服务器监听到push事件，就会自动重新生成整个博客，在一分钟内更新网站内容。

值得一提的是，QQ空间会自动不显示说说的空行，也就是说连着两个换行会被显示为一个换行。而空行是Markdown所规定的段落分隔符。为了避免全篇变成一个段落，我只得在空行上写一个减号，并在程序中用`replace('\n-\n', '\n\n')`来消除这些减号。

[1]: http://daringfireball.net/projects/markdown/
[2]: https://github.com/Smart-Hypercube/Qzone-API
[3]: https://github.com/Smart-Hypercube/0x01.me
[4]: /博客迁移